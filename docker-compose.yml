services:
  certstream-server-rust:
    build: .
    ports:
      - "${PORT:-8080}:${PORT:-8080}"
      - "${TCP_PORT:-8081}:${TCP_PORT:-8081}"
    environment:
      - CERTSTREAM_HOST=${HOST:-0.0.0.0}
      - CERTSTREAM_PORT=${PORT:-8080}
      - CERTSTREAM_LOG_LEVEL=${LOG_LEVEL:-info}
      - CERTSTREAM_BUFFER_SIZE=${BUFFER_SIZE:-1000}
      - CERTSTREAM_SSE_ENABLED=${SSE_ENABLED:-true}
      - CERTSTREAM_TCP_ENABLED=${TCP_ENABLED:-true}
      - CERTSTREAM_TCP_PORT=${TCP_PORT:-8081}
    volumes:
      - ./config.yaml:/etc/certstream/config.yaml:ro
    restart: unless-stopped
